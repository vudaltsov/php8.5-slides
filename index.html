<html lang="ru">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/theme/simple.min.css" id="theme">
    <link rel="stylesheet" href="highlight-phpstorm-light-theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'TTCommons';
            src: url('./fonts/TTCommons-Regular.ttf') format('truetype');
        }
        @font-face {
            font-family: 'TTCommons';
            src: url('./fonts/TTCommons-Black.ttf') format('truetype');
            font-weight: bold;
        }
        @font-face {
            font-family: 'TTCommons';
            src: url('./fonts/TTCommons-Italic.ttf') format('truetype');
            font-style: italic;
        }
        :root {
            --r-main-font: 'TTCommons', 'Montserrat', 'Noto Color Emoji', sans-serif;
            --r-heading-font: 'TTCommons', 'Montserrat', 'Noto Color Emoji', sans-serif;
            --r-code-font: 'Montserrat Mono', 'Noto Color Emoji', monospace;
            --r-block-margin: 20px;
            --r-link-color: #cc375d;
            --r-link-color-hover: #962c47;
            --r-heading2-size: 2.6em;
            --r-heading-font-weight: 500;
            --r-gray: #aaaaaa;
        }
        section {
            display: flex;
            align-items: center;
            justify-items: center;
        }
        .reveal .slide-number {
            top: 3.4%;
            right: -15.8%;
            width: 60px;
            bottom: inherit;
            background: none;
            color: #838383;
            font-size: 0.9em;
            text-align: center;
            padding: 0 !important;
            margin: 0 !important;
        }
        .reveal .present ~ .slide-number {
            display: none !important;
        }
        td.hljs-ln-code {
            white-space: pre;
        }
        .reveal pre {
            font-size: .55em;
            display: flex;
            flex-direction: column;
            width: auto;
            min-width: 60%;
            border-radius: 1em;
            overflow: hidden;
            border: 4px solid var(--r-gray);
            background: var(--r-gray);
            box-shadow: none;
        }
        .reveal pre:before {
            padding: .5em 1em;
        }
        .reveal pre.php-lt-85:before {
            content: 'PHP < 8.5';
            color: white;
        }
        .reveal pre.php-gte-85, .reveal pre.php-gte-86 {
            border-color: var(--r-link-color);
            background: var(--r-link-color);
        }
        .reveal pre.php-gte-85:before {
            content: 'PHP >= 8.5';
            color: white;
        }
        .reveal pre.php-gte-86:before {
            content: 'PHP >= 8.6 ?';
            color: white;
        }
        .reveal pre > code {
            max-height: none;
        }
        .reveal .hljs {
            min-height: auto;
        }
        .rfc, .pr {
            font-size: 1.4em;
            line-height: 1.1em;
            position: relative;
            display: block;
            text-align: left;
            margin: calc(var(--r-block-margin) * 2) 0;
        }
        .rfc {
            padding-left: 2.6em;
        }
        .pr {
            padding-left: 2em;
        }
        .rfc:before {
            content: 'RFC';
        }
        .pr:before {
            content: 'PR';
        }
        .rfc:before, .pr:before {
            display: block;
            position: absolute;
            top: -0.3em;
            bottom: 0;
            left: 0;
            background: var(--r-link-color);
            border-radius: 8px;
            color: white;
            padding: 0 0.4em;
            font-size: 0.8em;
            line-height: 1.9em;
        }
        .rfc:hover:before, .pr:hover:before {
            background: var(--r-link-color-hover);
        }
    </style>
    <title>PHP 8.5 не сбавляет темп!</title>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section data-background-image="title_bg.png" data-background-size="contain"></section>

        <div class="slide-number"></div>

        <section data-background-image="bg.png" data-background-size="contain">
            <h3>Как получить первый&nbsp;элемент&nbsp;массива?</h3>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $firstKey = array_key_first($array);

                    if ($firstKey === null) {
                        $first = null;
                    } else {
                        $first = $array[$firstKey];
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = null;

                    foreach ($array as $value) {
                        $first = $value;

                        break;
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = reset($array);

                    if ($first === false) {
                        // $array is empty or first value is false
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = new ArrayIterator($array)->current();
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = array_values($array)[0] ?? null;
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = array_shift($array);
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $reversed = array_reverse($array);

                    $first = array_pop($reversed);
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = array_reduce(
                        $array,
                        static fn($carry, $value) => $carry ?? $value,
                    );
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <p><a class="rfc" href="https://wiki.php.net/rfc/array_first_last" target="_blank">array_first() and array_last()</a></p>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    $first = array_first($array);

                    $last = array_last($array);
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-bash" data-trim>
                    composer require symfony/polyfill-php85
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <p><a class="rfc" href="https://wiki.php.net/rfc/pipe-operator-v3" target="_blank">Pipe operator v3</a></p>
        </section>

        <section>
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    function normalizeUsername(string $name): string
                    {
                        $name = trim($name);
                        $name = strtolower($name);
                        $name = preg_replace(T_ME_REGEX, '', $name);
                        $name = trim($name);

                        return $name;
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="|6-7">
                    function normalizeUsername(string $name): string
                    {
                        return $name
                            |> trim(...)
                            |> strtolower(...)
                            |> fn (string $name) => preg_replace(T_ME_REGEX, '', $name)
                            |> trim(...);
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="6-8">
                    function normalizeUsername(string $name): string
                    {
                        return $name
                            |> trim(...)
                            |> strtolower(...)
                            |> fn (string $name) =>
                                preg_replace(T_ME_REGEX, '', $name)
                                    |> trim(...);
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="6-8">
                    0
                        |> fn($x) => $x < 5
                        |> fn($x) => var_dump($x);
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="6-8">
                    0
                        |> fn($x) => $x < (5 |> fn($x) => var_dump($x));
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="6-9">
                    function normalizeUsername(string $name): string
                    {
                        return $name
                            |> trim(...)
                            |> strtolower(...)
                            // ❌ Fatal error:
                            // ❌ Arrow functions on the right hand side of |>
                            // ❌ must be parenthesized
                            |> fn (string $name) => preg_replace(T_ME_REGEX, '', $name)
                            |> trim(...);
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    function normalizeUsername(string $name): string
                    {
                        return $name
                            |> trim(...)
                            |> strtolower(...)
                            |> (fn (string $name) => preg_replace(T_ME_REGEX, '', $name))
                            |> trim(...);
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-86">
                <code class="language-php" data-trim data-line-numbers>
                    function normalizeUsername(string $name): string
                    {
                        return $name
                            |> trim(...)
                            |> strtolower(...)
                            |> preg_replace(T_ME_REGEX, '', ?)
                            |> trim(...);
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <p><a class="rfc" href="https://wiki.php.net/rfc/url_parsing_api" target="_blank">Add RFC 3986 and WHATWG URL compliant API</a></p>
        </section>


        <section data-background-image="bg.png" data-background-size="contain">
            <img src="exploit.png" alt="" style="max-width: 80%">
            <a href="https://claroty.com/team82/research/exploiting-url-parsing-confusion">Exploiting URL Parsing Confusion</a>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    namespace Uri;

                    class UriException extends \Exception {}

                    class InvalidUriException extends UriException {}

                    enum UriComparisonMode
                    {
                        case IncludeFragment;
                        case ExcludeFragment;
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    namespace Uri\Rfc3986;

                    final readonly class Uri
                    {
                        public static function parse(string $uri, ?Uri $baseUrl = null): ?static {}

                        /** @throws Uri\InvalidUriException */
                        public function __construct(string $uri, ?Uri $baseUrl = null) {}

                        public function getScheme(): ?string {}

                        public function getRawScheme(): ?string {}

                        /** @throws Uri\InvalidUriException */
                        public function withScheme(?string $scheme): static {}

                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    namespace Uri\WhatWg;

                    final readonly class Url { /** ... */ }

                    enum UrlValidationErrorType { /** cases */ }

                    final readonly class UrlValidationError
                    {
                        public function __construct(
                            public string $context,
                            public UrlValidationErrorType $type,
                            public bool $failure,
                        ) {}
                    }

                    class InvalidUrlException extends \Uri\InvalidUriException
                    {
                        /** @param list&lt;UrlValidationError&gt; $errors */
                        public readonly array $errors;
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <p><a class="rfc" href="https://wiki.php.net/rfc/clone_with_v2" target="_blank">Clone with v2</a></p>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    namespace Thesis\Amqp;

                    final readonly class Message
                    {
                        public function __construct(
                            public string $body = '',
                            public array $headers = [],
                            public ?string $contentType = null,
                            public ?string $contentEncoding = null,
                            public DeliveryMode $deliveryMode = DeliveryMode::Whatever,
                            public ?int $priority = null,
                            public ?string $correlationId = null,
                            // ...
                        ) {}
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers="|8">
                    return new Message(
                        body: $message->body,
                        headers: $message->headers,
                        contentType: $message->contentType,
                        contentEncoding: $message->contentEncoding,
                        deliveryMode: $message->deliveryMode,
                        priority: $message->priority,
                        correlationId: $correlationId,
                        // ...
                    );
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Message
                    {
                        // ...

                        public function withCorrelationId(?string $correlationId): self
                        {
                            return new self(
                                body: $this->body,
                                // ...
                                correlationId: $correlationId,
                                // ...
                            );
                        }
                    }

                    $message = $message->withCorrelationId('...');
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Message
                    {
                        // ...

                        public function withCorrelationId(?string $correlationId): self
                        {
                            $message = clone $this;

                            // ❌ Cannot modify readonly property
                            $message->correlationId = $correlationId;

                            return $message;
                        }
                    }

                    $message = $message->withCorrelationId('...');
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Message
                    {
                        // ...

                        public function withCorrelationId(?string $correlationId): self
                        {
                            // ✅ 🙂
                            return new self(...[
                                ...get_object_vars($this),
                                'correlationId' => $correlationId,
                            ]);
                        }
                    }

                    $message = $message->withCorrelationId('...');
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Message
                    {
                        // ...

                        public function withCorrelationId(?string $correlationId): self
                        {
                            // ✅ 🤩
                            return clone($this, [
                                'correlationId' => $correlationId,
                            ]);
                        }
                    }

                    $message = $message->withCorrelationId('...');
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Message
                    {
                        // ...
                    }

                    $message = clone(new Message(), [
                        'correlationId' => $correlationId,
                    ]);
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Message
                    {
                        // ...
                    }

                    // ❌ Cannot modify protected(set) readonly property
                    // ❌ Message::$correlationId from global scope

                    $message = clone(new Message(), [
                        'correlationId' => $correlationId,
                    ]);
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <a class="rfc" href="https://wiki.php.net/rfc/marking_return_value_as_important" target="_blank">Marking return values as important (#[NoDiscard])</a>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers="|9">
                    namespace Yiisoft\Validator;

                    interface ValidatorInterface
                    {
                        public function validate(
                            mixed $data,
                            callable|iterable|object|string|null $rules = null,
                            ?ValidationContext $context = null,
                        ): Result;
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    new Validator()->validate(0, new Number(min: 1));
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $result = new Validator()->validate(0, new Number(min: 1));

                    // false 😲
                    dump($result->isValid());
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="|5">
                    final class Validator implements ValidatorInterface
                    {
                        // ...

                        #[\NoDiscard('Неправильно, широкую на широкую надо!!!')]
                        public function validate(/** args */): Result
                        {
                            // ...
                        }

                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    // ⚠️ Warning: The return value of method
                    // ⚠️ Validator::validate() should either be used
                    // ⚠️ or intentionally ignored by casting it as (void),
                    // ⚠️ Неправильно, широкую на широкую надо!!!

                    new Validator()->validate(0, new Number(min: 1));
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    public function testRuleWithoutHandler(): void
                    {
                        $this->expectException(RuleHandlerNotFoundException::class);

                        $validator = new Validator();

                        // ⚠️ Warning
                        $validator->validate(/** args */);
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    public function testRuleWithoutHandler(): void
                    {
                        $this->expectException(RuleHandlerNotFoundException::class);

                        $validator = new Validator();

                        // ✅
                        (void) $validator->validate(/** args */);
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <div>
                <a class="rfc" href="https://wiki.php.net/rfc/closures_in_const_expr" target="_blank">Support Closures in constant expressions</a>
                <a class="rfc" href="https://wiki.php.net/rfc/fcc_in_const_expr" target="_blank">First Class Callables in constant expressions</a>
            </div>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Pay
                    {
                        public function __construct(
                            #[Assert(is_numeric(...))]
                            public string $amount,
                        ) {}
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Register
                    {
                        public function __construct(
                            #[Assert(self::isLengthy(...))]
                            public string $rawPassword,
                        ) {}

                        private static function isLengthy(string $pass): bool
                        {
                            return mb_strlen($pass) >= 8;
                        }
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Register
                    {
                        public function __construct(
                            #[Assert(static function (string $password): bool {
                                return trim($password) !== '';
                            })]
                            public string $rawPassword,
                        ) {}
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Register
                    {
                        private const Closure NON_EMPTY =
                            static function (string $password): bool {
                                return trim($password) !== '';
                            };

                        public function __construct(
                            #[Assert(self::NON_EMPTY)]
                            public string $rawPassword,
                        ) {}
                    }
                </code>
            </pre>
        </section>

        <section>
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    const NON_EMPTY_VALIDATOR = static function (string $password): bool {
                        return trim($password) !== '';
                    };

                    final readonly class Register
                    {
                        public function __construct(
                            #[Assert(NON_EMPTY_VALIDATOR)]
                            public string $rawPassword,
                        ) {}
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Service
                    {
                        public function __construct(
                            private Closure $onFinish,
                            private LoggerInterface $logger = new NullLogger(),
                        ) {}

                        public function do(): void
                        {
                            // ...

                            ($this->onFinish)();
                        }
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Service
                    {
                        private Closure $onFinish;

                        public function __construct(
                            ?Closure $onFinish = null,
                        ) {
                            $this->onFinish = $onFinish ?? static function (): void {};
                        }

                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final readonly class Service
                    {
                        public function __construct(
                            private Closure $onFinish = static function (): void {},
                        ) {}

                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    function void(): void {}

                    final readonly class Service
                    {
                        public function __construct(
                            private Closure $onFinish = void(...),
                        ) {}

                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <div>
                <a class="rfc" href="https://wiki.php.net/rfc/curl_share_persistence" target="_blank">Add persistent curl share handles</a>
                <a class="rfc" href="https://wiki.php.net/rfc/curl_share_persistence_improvement" target="_blank">Persistent curl share handle improvement</a>
            </div>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    namespace Composer\Util\Http;

                    class CurlDownloader
                    {
                        public function __construct(/** args */)
                        {
                            // ...

                            $this->shareHandle = $sh = curl_share_init();
                            curl_share_setopt($sh, CURLSHOPT_SHARE, CURL_LOCK_DATA_COOKIE);
                            curl_share_setopt($sh, CURLSHOPT_SHARE, CURL_LOCK_DATA_DNS);
                            curl_share_setopt($sh, CURLSHOPT_SHARE, CURL_LOCK_DATA_SSL_SESSION);

                            // ...
                        }
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre>
                <code class="language-php" data-trim data-line-numbers>
                    $db = new PDO('mysql:host=localhost;dbname=test', $user, $pass, [
                        PDO::ATTR_PERSISTENT => true
                    ]);
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    $shareHandle = curl_share_init_persistent(
                        share_options: [
                            CURL_LOCK_DATA_COOKIE, // ❌
                            CURL_LOCK_DATA_DNS,
                            CURL_LOCK_DATA_SSL_SESSION,
                        ],
                    );
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <a class="rfc" href="https://wiki.php.net/rfc/static-aviz" target="_blank">Asymmetric Visibility <br>for Static Properties</a>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    final class GlobalCounter
                    {
                        public private(set) static int $current = 0;

                        public static function increment(): void
                        {
                            ++self::$current;
                        }
                    }

                    GlobalCounter::increment();
                    GlobalCounter::increment();

                    var_dump(GlobalCounter::$current); // 2
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <a class="pr" href="https://github.com/php/php-src/pull/18167" target="_blank">Implement Closure::getCurrent()<br>to retrieve current closure</a>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    function fibonacci(int $n): int
                    {
                        return match ($n) {
                            0 => 0,
                            1 => 1,
                            default => fibonacci($n - 1) + fibonacci($n - 2),
                        };
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $fibonacci = static function (int $n): int {
                        return match ($n) {
                            0 => 0,
                            1 => 1,
                            default => ???($n - 1) + ???($n - 2),
                        };
                    };
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-lt-85">
                <code class="language-php" data-trim data-line-numbers>
                    $fibonacci = static function (int $n) use (&$fibonacci): int {
                        return match ($n) {
                            0 => 0,
                            1 => 1,
                            default => $fibonacci($n - 1) + $fibonacci($n - 2),
                        };
                    };
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers="|2,7">
                    $fibonacci = static function (int $n): int {
                        $self = Closure::getCurrent();

                        return match ($n) {
                            0 => 0,
                            1 => 1,
                            default => $self($n - 1) + $self($n - 2),
                        };
                    };
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <h3>Полезновое</h3>
            <ul>
                <li><a href="https://web-php-pr-1454.preview.thephp.foundation/releases/8.5/en.php">Черновик лендинга к релизу 8.5</a></li>
                <li><a href="https://github.com/symfony/polyfill-php85">Полифилы для новых классов и функций от Symfony</a></li>
                <li><a href="https://t.me/phpyh/598">Мой доклад «PHP 8.4: живее всех живых!»</a></li>
                <li><a href="https://thephp.foundation/blog/2025/10/01/design-contest/">🤑 $1000</a></li>
            </ul>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <div style="display: flex; align-items: center; justify-items: center;">
                <div>
                    <h6 style="margin: 0;">Оцени мой доклад 🙏</h6>
                    <a href="https://clck.ru/3PXjQq" target="_blank">
                        <img src="qr.png" alt="Оцени доклад" style="margin: 0">
                    </a>
                </div>
                <div>
                    <p>
                        <a href="https://t.me/vudaltsov">@vudaltsov</a><br>
                        <a href="https://t.me/phpyh">Пых</a> / <a href="https://t.me/phpyhconf">Пых.конф</a><br>
                        <a href="https://github.com/thesis-php">Thesis</a> / <a href="https://github.com/typhoon-php">Typhoon</a>
                    </p>
                </div>
            </div>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <h3>Для тех, кто любит типы...</h3>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    /**
                     * ???
                     */
                    function array_first(array $array): mixed
                    {
                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    /**
                     * @template T
                     * @param array&lt;T&gt; $array
                     * @return ?T
                     */
                    function array_first(array $array): mixed
                    {
                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    /**
                     * @template T
                     * @param array&lt;T&gt; $array
                     * @return ($array is non-empty-array ? T : ?T)
                     */
                    function array_first(array $array): mixed
                    {
                        // ...
                    }
                </code>
            </pre>
        </section>

        <section data-background-image="bg.png" data-background-size="contain">
            <pre class="php-gte-85">
                <code class="language-php" data-trim data-line-numbers>
                    /**
                     * @template T
                     * @param array&lt;T&gt; $array
                     * @return (
                     *     $array is array{} ? null :
                     *     $array is non-empty-array ? T :
                     *     ?T
                     * )
                     */
                    function array_first(array $array): mixed
                    {
                        // ...
                    }
                </code>
            </pre>
        </section>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reveal.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/highlight/highlight.min.js"></script>
<script>
    Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        plugins: [RevealHighlight],
        slideNumber: true,
        autoAnimate: true,
        width: 1280,
        height: 720,
    }).then((event) => {
        let curNum = (Reveal.getRevealElement()).querySelector(".reveal > .slide-number");
        let newNum = (Reveal.getRevealElement()).querySelector(".reveal > * .slide-number");
        let newNumClassList = newNum.classList;

        if (curNum && newNum ) {
            newNum.parentNode.replaceChild(curNum, newNum);
            curNum.classList = newNumClassList;
        }
    });
</script>
</body>
</html>
